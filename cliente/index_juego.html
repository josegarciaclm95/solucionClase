<!doctype html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Prototipo TFG</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="css/propios/estilosPropios.css">
    <script src="lib/jquery/jquery-3.1.1.min.js"></script>
    <!--<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>-->
    <script src="lib/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="lib/phaser/phaser.min.js"></script>
    <script type="text/javascript" src="lib/jquery/jquery.cookie.js"></script>
    <script src="lib/jquery/jquery.loading.block.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon.png">
</head>

<body>
    <!--
    <audio id="backMusic" src="assets/audio/dearlyBeloved.mp3" autoplay="true" loop="true"></audio>
    -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
                    aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="./index_juego.html">Aprende Jugando</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul id="barNav" class="nav navbar-nav">
                    <li id="inicio" class="active">
                        <a href="#inicio">
                            <span class="glyphicon glyphicon-home" aria-hidden="true"></span> Inicio <span class="sr-only">(current)</span></a>
                    </li>
                    <li id="modificar" style="display:none">
                        <a href="#modificar" onclick="cambiarUsuario('Modificar')">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Modificar usuario</a>
                    </li>
                    <li id="eliminar" style="display:none">
                        <a href="#eliminar" onclick="cambiarUsuario('Eliminar')">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Eliminar usuario</a>
                    </li>
                    <li id="resultadosNavBar">
                        <a href="#resultadosNavBar" onclick="mostrarResultados()">
                            <span class="glyphicon glyphicon-signal" aria-hidden="true"></span> Resultados
                        </a>
                    </li>
                </ul>
                <ul id="barNav_r" class="nav navbar-nav navbar-right">
                    <li id="sonido">
                        <a id="sonidoControl" href="#">
                            <span class="glyphicon glyphicon-volume-off" aria-hidden="true"></span>
                            <strong>Sonido</strong>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
    </div>
    <div class="container-fluid">
        <div class="row intro">
            <div class="col-md-12" id="intro-row">
                <h1 class="info">¡Bienvenido a Aprende Jugando!</h1>
                <h3 class="info">¿Quién dijo que aprender era aburrido? Demuestra tu dominio del inglés al mismo tiempo que ayudas al chef 
                a preparar la comida</h3>
                <h3 class="info">¡Inicia sesión para ponerte a prueba!</h3>
                <button id="myBtn" type="button" class="btn btn-success">¡Acepto el reto!</button>
                <button id="myBtn1" type="button" class="btn btn-success">Activar micrófono</button>
                
                <!-- The Modal -->
                <div id="myModal" class="modal">
                <!-- Modal content -->
                <div id="modal-login" class="modal-content">
                    <span class="close">&times;</span>
                </div>
                </div>
            </div>
		</div>
		<div class="row">
			<div class="col-sm-4">
				<div id="control">
					
				</div>
			</div>
			<div class="col-sm-8">
				<div class="row" id="juegoContainer">
				
				</div>
			</div>
		</div>
		<div class="col-md-8" style="display:none" id="affdex_elements" style="width:680px;height:480px;">
		</div>
    </div>

    <!--
<script type="text/javascript" src="js/juego.js"></script></body>
-->
    <script type="text/javascript" src="js/interfaz/juegoClase.js"></script>
    <script type="text/javascript" src="js/interfaz/GUIControl.js"></script>
    <script type="text/javascript" src="js/control/control-juego.js"></script>
    <script type="text/javascript" src="js/control/proxy.js"></script>
    <script type="text/javascript" src="js/tool/builder-json.js"></script>
    <script type="text/javascript" src="js/tool/speech.js"></script>
    <script src="https://download.affectiva.com/js/3.1/affdex.js"></script>
    <script type="text/javascript" src="js/tool/affedex.js"></script>
    <script type="text/javascript" src="js/tool/audiorecord/main.js"></script>
    <script type="text/javascript" src="js/tool/audiorecord/recorder.js"></script>
    <script type="text/javascript" src="js/tool/audiorecord/recorderWorker.js"></script>
    <script type="text/javascript" src="js/tool/beyondVerbal.js"></script>
    <script type="text/javascript">
        var proxy = new proxy();
        $("#sonidoControl").on("click", apagarMusica);
        inicio();
        window.onhashchange = function (e) {
            //console.log(e)
            var newPage = e.newURL.split('#')[1]
            var oldPage = e.oldURL.split('#')[1]
            if (!oldPage) oldPage = "inicio";
            if (!newPage) newPage = "sonido"
            $('#' + newPage).addClass('active')
            $('#' + oldPage).removeClass('active')
        }
        setModal();
        var recognition = new _SpeechRecognition();
        recognition.setGrammar(["apple","banana","pear","pineapple","orange","lemon"],"fruits","fruit");
        recognition.onResult(onResultDemo);
        recognition.onSpeechEnd(onSpeechEndDemo);
        recognition.onNoMatch(onNoMatchDemo);
        recognition.onError(onErrorDemo);
        var synthesis = new _SpeechSynthesis("en-GB", "Female", 1.2, 1);        

        var affdexDetector = new Affdex();
        affdexDetector.onInitializeSuccess(onInitializeSuccessDEMO);
        affdexDetector.onWebcamConnectSuccess(onWebcamConnectSuccessDEMO);
        affdexDetector.onWebcamConnectFailure(onWebcamConnectFailureDEMO);
        affdexDetector.onStopSuccess(onStopSuccessDEMO);
        affdexDetector.onImageResultsSuccess(onImageResultsSuccessDEMO);

        var beyondVerbal = new BeyondVerbalAPI('https://token.beyondverbal.com/token','https://apiv3.beyondverbal.com/v1/recording/');
        $("#myBtn1").on("click", function(){
            initAudio();
            $(this).remove();
            $("#intro-row").append('<button id="myBtn2" type="button" class="btn btn-success" onclick="toggleRecording(this);">Grabar audio</button>');
             $("#intro-row").append('<button id="myBtn3" type="button" class="btn btn-success" onclick="recognition.stopRecognition();">Parar grabación</button>');
        })
    </script>
</body>

</html>
